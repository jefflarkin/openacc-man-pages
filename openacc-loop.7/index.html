<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>% OpenACC-Loop(7)<br />
% OpenACC 2.5 Specification<br />
% October 2015</p>
<h1 id="name">NAME</h1>
<p>LOOP - LOOP construct</p>
<h1 id="synopsis">SYNOPSIS</h1>
<h2 id="cc">C/C++</h2>
<pre><code>#pragma acc loop [clause-list]
for ( ... )</code></pre>
<h2 id="fortran">Fortran</h2>
<pre><code>!$acc loop [clause-list]
do ...</code></pre>
<h1 id="description">DESCRIPTION</h1>
<p>The loop construct provides additional information to the compiler about the<br />
loop that immediately follows in the code.</p>
<h1 id="clauses">CLAUSES</h1>
<p><code>reduction(operator:list)</code></p>
<ul>
<li>The reduction claue specifies that for each variable in <em>list</em> a private copy<br />
 of that variable should be created for each loop iteration and these private<br />
 copies will be combined into a single value using the specified <em>operation</em>,<br />
 which will be available after the loop. Variables in <em>list</em> may not be<br />
 arrays, array elements, members of C or C++ structs, C++ class members, or<br />
 members of a Fortran derived type. Value operators are in the table below.</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">C/C++ operator</th>
<th style="text-align: left;">initial value</th>
<th style="text-align: left;">Fortran operator</th>
<th style="text-align: left;">initial value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>+</code></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><code>+</code></td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>*</code></td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"><code>*</code></td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>max</code></td>
<td style="text-align: left;">least</td>
<td style="text-align: left;"><code>max</code></td>
<td style="text-align: left;">least</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>min</code></td>
<td style="text-align: left;">largest</td>
<td style="text-align: left;"><code>min</code></td>
<td style="text-align: left;">largest</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>&amp;</code></td>
<td style="text-align: left;">~0</td>
<td style="text-align: left;"><code>iand</code></td>
<td style="text-align: left;">all bits on</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>|</code></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><code>ior</code></td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%</code></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><code>ieor</code></td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>&amp;&amp;</code></td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"><code>.and.</code></td>
<td style="text-align: left;"><code>.true.</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>||</code></td>
<td style="text-align: left;">0</td>
<td style="text-align: left;"><code>.or.</code></td>
<td style="text-align: left;"><code>.false.</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>.eqv.</code></td>
<td style="text-align: left;"><code>.true.</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><code>.neqv.</code></td>
<td style="text-align: left;"><code>.false.</code></td>
</tr>
</tbody>
</table>
<p><code>collapse(N)</code></p>
<ul>
<li></li>
</ul>
<p><code>tile(N,[M,...])</code></p>
<ul>
<li></li>
</ul>
<p><code>independent</code></p>
<ul>
<li></li>
</ul>
<p><code>auto</code></p>
<ul>
<li></li>
</ul>
<p><code>private</code></p>
<ul>
<li></li>
</ul>
<p><code>seq</code></p>
<ul>
<li></li>
</ul>
<p><code>gang</code>, <code>worker</code>, <code>vector</code></p>
<ul>
<li></li>
</ul>
<p><code>device_type(type)</code></p>
<ul>
<li>Any clauses that follow a <code>device_type</code> clause will only apply to a device of<br />
 the given type. When <code>*</code> is the type, then clauses apply to all other device<br />
 types not specified in another <code>device_type</code> clause. The <code>device_type</code> clause<br />
 may be abbreviated <code>dtype</code>.</li>
</ul>
<h1 id="example-still-needs-fixing">EXAMPLE (STILL NEEDS FIXING)</h1>
<p>In the examples below two arrays (A and B) are initialized and then 2 * B is<br />
stored into the A array. The compiler will generate an accelerator kernel to<br />
execute the loops contained within the region. The loop directive is also<br />
shown, demonstrating how to specify which loops should be parallelized. It is<br />
the compiler's responsibility to insert any syncronization necessary between<br />
the two contained loops to ensure correctness.</p>
<p><em>Note:</em> A more common approach may be to use two <code>acc parallel loop</code> combined<br />
directives, one on each loop, rather than a single parallel region with two<br />
distinct loop directives.</p>
<h2 id="cc-1">C/C++</h2>
<pre><code>#pragma acc parallel
{
  #pragma acc loop
  for(int i = 0 ; i &lt; N; i++) 
  {
    A[i] = 0;
    B[i] = i;
  }
  #pragma acc loop
  for(int i = 0 ; i &lt; N; i++) 
  {
    A[i] = 2 * B[i];
  }
}</code></pre>
<h2 id="fortran-1">Fortran</h2>
<pre><code>!$acc parallel
!$acc loop
do i=1,N
  A(i) = 0
  B(i) = i
end do
!$acc loop
do i=1,N
  A(i) = 2 * B(i)
end do
!$acc end parallel</code></pre>
<h1 id="see-also">SEE ALSO</h1>
<p><a href="../openacc-parallel">openacc-parallel</a>,<br />
<a href="../openacc-kernels">openacc-kernels</a></p>
</body>
</html>
